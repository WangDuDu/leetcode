package leetcode.editor.cn;

//ç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„ nums å’Œä¸€ä¸ªæ•´æ•° target ã€‚ 
//
// å‘æ•°ç»„ä¸­çš„æ¯ä¸ªæ•´æ•°å‰æ·»åŠ  '+' æˆ– '-' ï¼Œç„¶åä¸²è”èµ·æ‰€æœ‰æ•´æ•°ï¼Œå¯ä»¥æ„é€ ä¸€ä¸ª è¡¨è¾¾å¼ ï¼š 
//
// 
// ä¾‹å¦‚ï¼Œnums = [2, 1] ï¼Œå¯ä»¥åœ¨ 2 ä¹‹å‰æ·»åŠ  '+' ï¼Œåœ¨ 1 ä¹‹å‰æ·»åŠ  '-' ï¼Œç„¶åä¸²è”èµ·æ¥å¾—åˆ°è¡¨è¾¾å¼ "+2-1" ã€‚ 
// 
//
// è¿”å›å¯ä»¥é€šè¿‡ä¸Šè¿°æ–¹æ³•æ„é€ çš„ã€è¿ç®—ç»“æœç­‰äº target çš„ä¸åŒ è¡¨è¾¾å¼ çš„æ•°ç›®ã€‚ 
//
// 
//
// ç¤ºä¾‹ 1ï¼š 
//
// 
//è¾“å…¥ï¼šnums = [1,1,1,1,1], target = 3
//è¾“å‡ºï¼š5
//è§£é‡Šï¼šä¸€å…±æœ‰ 5 ç§æ–¹æ³•è®©æœ€ç»ˆç›®æ ‡å’Œä¸º 3 ã€‚
//-1 + 1 + 1 + 1 + 1 = 3
//+1 - 1 + 1 + 1 + 1 = 3
//+1 + 1 - 1 + 1 + 1 = 3
//+1 + 1 + 1 - 1 + 1 = 3
//+1 + 1 + 1 + 1 - 1 = 3
// 
//
// ç¤ºä¾‹ 2ï¼š 
//
// 
//è¾“å…¥ï¼šnums = [1], target = 1
//è¾“å‡ºï¼š1
// 
//
// 
//
// æç¤ºï¼š 
//
// 
// 1 <= nums.length <= 20 
// 0 <= nums[i] <= 1000 
// 0 <= sum(nums[i]) <= 1000 
// -1000 <= target <= 1000 
// 
// Related Topics æ•°ç»„ åŠ¨æ€è§„åˆ’ å›æº¯ ğŸ‘ 1192 ğŸ‘ 0

/**
 * (1)ç¡®å®šåŠ¨æ€è§„åˆ’æ•°ç»„dp[i][j]
 *      è¡¨ç¤ºï¼Œéå†åˆ°ç¬¬iä¸ªæ•°ï¼Œè¡¨è¾¾å¼çš„å€¼ä¸ºjçš„è¡¨è¾¾å¼æ•°ç›®
 * (2)ç¡®å®šçŠ¶æ€è½¬ç§»æ–¹ç¨‹
 *      å½“å‰éå†åˆ°çš„å€¼åº”è¯¥æ˜¯+ï¼šdp[i][j] = dp[i - 1][j - nums[i]]
 *      å½“å‰éå†åˆ°çš„å€¼åº”è¯¥æ˜¯-ï¼šdp[i][j] = dp[i - 1][j + nums[i]]
 * å½“åˆ†æåˆ°è¿™é‡Œçš„æ—¶å€™æˆ‘ä»¬å‘ç°æœ‰é—®é¢˜ã€‚jçš„å€¼å¯èƒ½ä¸ºè´Ÿæ•°ï¼Œè¿™æ ·æˆ‘ä»¬å°±ä¸èƒ½ç”¨ä¸Šè¿°æ¨å¯¼æ–¹å¼äº†ï¼Œå’Œ416é¢˜ç›¸ä¼¼ï¼Œæˆ‘ä»¬éœ€è¦å°†è¿™ä¸ªé—®é¢˜å˜ä¸ºä¸€ä¸ªå…¨éƒ¨ä¸ºæ­£æ•°çš„å­é›†å’Œç­‰äºæŸä¸€ä¸ªå€¼
 * æˆ‘ä»¬å°†numsåˆ†ä¸ºä¸¤ä¸ªå­é›†ï¼ŒåŠ ã€Œ+ã€å·çš„æ­£æ•°ä¸ºsum[P](positive)ï¼ŒåŠ ã€Œ-ã€å·çš„ä¸º-sum[N](negative)ï¼Œå…¨éƒ¨ä¸ºæ­£æ•°çš„å’Œä¸ºsum(nums)ï¼Œé‚£ä¹ˆæœ‰ä»¥ä¸‹æ¨è®º
 * è¦è¾¾æˆçš„ç›®æ ‡æ˜¯
 * sum(P) - sum(N) = target
 * ä¸¤è¾¹åŒæ—¶åŠ ä¸Šsum(P) + sum(N)
 * sum(P) - sum(N) + sum(P) + sum(N) = target + sum(P) + sum(N)
 * å…¶ä¸­sum(P) + sum(N) = sum[nums]
 * 2 * sum[P] = target + sum[nums]
 * sum[P] = (target + sum[nums]) / 2
 * -sum[nums]<=target<=sum[nums],æ‰€ä»¥(target + sum[nums]) / 2 >= 0
 *
 * ç„¶åé—®é¢˜å°±å˜ä¸ºäº†æ±‚ä¸€ä¸ªå…¨ä¸ºæ­£æ•°çš„å­é›†å’Œä¸ºnewTarget = (target + sum[nums]) / 2, newTarget >= 0
 * (1)ç¡®å®šåŠ¨æ€è§„åˆ’æ•°ç»„dp[i][j]
 *      è¡¨ç¤ºå‰iä¸ªå€¼çš„å­é›†å’Œä¸ºjçš„æƒ…å†µ
 * (2)ç¡®å®šçŠ¶æ€è½¬ç§»æ–¹ç¨‹
 *      å½“å‰çš„å€¼åŠ å…¥å­é›†
 *          j >= nums[i]: dp[i][j] = dp[i - 1][j - nums[i]]
 *          i <  nums[i]: dp[i][j] = 0
 *      å½“å‰çš„å€¼ä¸åŠ å…¥å­é›†
 *          dp[i][j] = dp[i - 1][j]
 * (3)åˆå§‹åŒ–ï¼š
 *      åœ¨åˆå§‹åŒ–çš„æ—¶å€™ä¸€å®šè¦æ³¨æ„ï¼Œåœ¨åˆå§‹åŒ–dp[0][0]çš„æ—¶å€™ï¼Œå½“numsçš„ç¬¬ä¸€ä¸ªå€¼nums[0]=0çš„æ—¶å€™dp[0][0]=2ï¼Œå› ä¸ºç¬¬ä¸€ä¸ªå€¼0å¯ä»¥åŠ å…¥å­é›†ï¼Œä¹Ÿå¯ä»¥ä¸åŠ å…¥å­é›†ï¼Œæœ‰ä¸¤ç§æƒ…å†µ
 *      ç¬¬ä¸€ä¸ªå€¼ä¸ä¸º0çš„æ—¶å€™ï¼Œåªæœ‰ä¸æŠŠç¬¬ä¸€ä¸ªå€¼æ”¾å…¥å­é›†ä¸€ç§æƒ…å†µ
 *      dp[0][0] = nums[0] == 0 ? 2 : 1;
 *      ç¬¬ä¸€ä¸ªå€¼æ˜¯å¦ç­‰äºjå†³å®šäº†ï¼Œå‰1ä¸ªå€¼çš„å’Œèƒ½å¦ä¸ºj
 *      dp[0][j] = nums[0] == j ? 1 : 0;
 */

public class TargetSum {
    public static void main(String[] args) {

        Solution solution = new TargetSum().new Solution();
//        System.out.println(solution.findTargetSumWays(new int[]{1, 1, 1, 1, 1}, 3));
//        System.out.println(solution.findTargetSumWays(new int[]{1}, 1));
        System.out.println(solution.findTargetSumWays(new int[]{0,0,0,0,0,0,0,0,1}, 1));

    }

    class Solution {
        public int findTargetSumWays(int[] nums, int target) {
            int length = nums.length;
            int sum = 0;
            for (int i = 0; i < length; i++) {
                sum += nums[i];
            }

            if (target > sum || -target > sum || (target + sum) % 2 == 1) {
                return 0;
            }
            int newTarget = (target + sum) / 2;
            int[][] dp = new int[length][newTarget + 1];

            dp[0][0] = nums[0] == 0 ? 2 : 1;
            for (int j = 1; j <= newTarget; j++) {
                dp[0][j] = nums[0] == j ? 1 : 0;
            }

            for (int i = 1; i < length; i++) {
                for (int j = 0; j <= newTarget; j++) {
                    dp[i][j] = (j >= nums[i] ? dp[i - 1][j - nums[i]] : 0) + dp[i - 1][j];
                }
            }
            return dp[length - 1][newTarget];
        }
    }

}